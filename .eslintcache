[{"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\index.js":"1","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\App.js":"2","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\serviceWorker.js":"3","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\app\\store.js":"4","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\firebase.js":"5","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\Login.js":"6","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\features\\userSlice.js":"7","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\features\\chatSlice.js":"8","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\Sidebar.js":"9","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\Chat.js":"10","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\axios.js":"11","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\SidebarChat.js":"12","D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\Message.js":"13","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\index.js":"14","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\App.js":"15","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\serviceWorker.js":"16","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\app\\store.js":"17","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\firebase.js":"18","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\Login.js":"19","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\Chat.js":"20","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\Sidebar.js":"21","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\features\\userSlice.js":"22","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\features\\chatSlice.js":"23","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\axios.js":"24","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\Message.js":"25","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\SidebarChat.js":"26","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\index.js":"27","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\App.js":"28","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\serviceWorker.js":"29","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\app\\store.js":"30","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\Login.js":"31","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\Chat.js":"32","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\firebase.js":"33","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\Sidebar.js":"34","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\features\\chatSlice.js":"35","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\features\\userSlice.js":"36","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\Message.js":"37","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\axios.js":"38","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\SidebarChat.js":"39"},{"size":644,"mtime":1609863929875,"results":"40","hashOfConfig":"41"},{"size":1104,"mtime":1609910032949,"results":"42","hashOfConfig":"41"},{"size":5141,"mtime":1609863929875,"results":"43","hashOfConfig":"41"},{"size":260,"mtime":1609863929874,"results":"44","hashOfConfig":"41"},{"size":716,"mtime":1609910153759,"results":"45","hashOfConfig":"41"},{"size":747,"mtime":1609910223920,"results":"46","hashOfConfig":"41"},{"size":462,"mtime":1609863929875,"results":"47","hashOfConfig":"41"},{"size":546,"mtime":1609863929874,"results":"48","hashOfConfig":"41"},{"size":4471,"mtime":1609910405392,"results":"49","hashOfConfig":"41"},{"size":6173,"mtime":1609910133550,"results":"50","hashOfConfig":"41"},{"size":131,"mtime":1609865317173,"results":"51","hashOfConfig":"41"},{"size":2142,"mtime":1609910438686,"results":"52","hashOfConfig":"41"},{"size":994,"mtime":1609908713807,"results":"53","hashOfConfig":"41"},{"size":644,"mtime":1609863929875,"results":"54","hashOfConfig":"55"},{"size":1104,"mtime":1609910032949,"results":"56","hashOfConfig":"55"},{"size":5141,"mtime":1609863929875,"results":"57","hashOfConfig":"55"},{"size":260,"mtime":1609863929874,"results":"58","hashOfConfig":"55"},{"size":716,"mtime":1609910153759,"results":"59","hashOfConfig":"55"},{"size":747,"mtime":1609910223920,"results":"60","hashOfConfig":"55"},{"size":5325,"mtime":1609967918190,"results":"61","hashOfConfig":"55"},{"size":3975,"mtime":1609967942886,"results":"62","hashOfConfig":"55"},{"size":462,"mtime":1609863929875,"results":"63","hashOfConfig":"55"},{"size":546,"mtime":1609863929874,"results":"64","hashOfConfig":"55"},{"size":196,"mtime":1609968281139,"results":"65","hashOfConfig":"55"},{"size":994,"mtime":1609908713807,"results":"66","hashOfConfig":"55"},{"size":1809,"mtime":1609967950107,"results":"67","hashOfConfig":"55"},{"size":644,"mtime":1609863929875,"results":"68","hashOfConfig":"69"},{"size":1104,"mtime":1609910032949,"results":"70","hashOfConfig":"69"},{"size":5141,"mtime":1609863929875,"results":"71","hashOfConfig":"69"},{"size":260,"mtime":1609863929874,"results":"72","hashOfConfig":"69"},{"size":747,"mtime":1609910223920,"results":"73","hashOfConfig":"69"},{"size":5325,"mtime":1609967918190,"results":"74","hashOfConfig":"69"},{"size":716,"mtime":1609910153759,"results":"75","hashOfConfig":"69"},{"size":3975,"mtime":1609967942886,"results":"76","hashOfConfig":"69"},{"size":546,"mtime":1609863929874,"results":"77","hashOfConfig":"69"},{"size":462,"mtime":1609863929875,"results":"78","hashOfConfig":"69"},{"size":994,"mtime":1609908713807,"results":"79","hashOfConfig":"69"},{"size":196,"mtime":1609969260616,"results":"80","hashOfConfig":"69"},{"size":1809,"mtime":1609967950107,"results":"81","hashOfConfig":"69"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},"1a9ajzq",{"filePath":"85","messages":"86","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"101","messages":"102","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},"1gu8ise",{"filePath":"112","messages":"113","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"111"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125","usedDeprecatedRules":"111"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"128","usedDeprecatedRules":"111"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"139","usedDeprecatedRules":"111"},{"filePath":"140","messages":"141","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1li341l",{"filePath":"142","messages":"143","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"144","messages":"145","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"146","messages":"147","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"148","messages":"149","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"150","messages":"151","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"152","messages":"153","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"154","messages":"155","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"156","messages":"157","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"160","messages":"161","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"162","messages":"163","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"164","messages":"165","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\index.js",[],["166","167"],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\App.js",["168"],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\serviceWorker.js",[],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\app\\store.js",[],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\firebase.js",[],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\Login.js",[],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\features\\userSlice.js",[],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\features\\chatSlice.js",[],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\Sidebar.js",["169"],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\Chat.js",["170","171","172"],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\axios.js",[],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\SidebarChat.js",["173","174","175","176","177"],"D:\\Documents - HDD\\React Projects\\imessage-clone\\imessage-frontend\\src\\Message.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\index.js",[],["178","179"],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\App.js",["180"],"import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"./App.css\";\r\nimport { selectUser, login, logout } from \"./features/userSlice\";\r\nimport Login from \"./Login\";\r\nimport { auth } from \"./firebase\";\r\nimport Chat from \"./Chat\";\r\nimport Sidebar from \"./Sidebar\";\r\n\r\nfunction App() {\r\n  const user = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((authUser) => {\r\n      if (authUser) {\r\n        // user is logged in\r\n        dispatch(\r\n          login({\r\n            uid: authUser.uid,\r\n            photo: authUser.photoURL,\r\n            email: authUser.email,\r\n            displayName: authUser.displayName,\r\n          })\r\n        );\r\n      } else {\r\n        // user is logged out\r\n        dispatch(logout());\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      {!user ? (\r\n        <Login />\r\n      ) : (\r\n        <div className=\"app__body\">\r\n            <Sidebar />\r\n            <Chat />\r\n        </div>\r\n      )}\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\serviceWorker.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\app\\store.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\firebase.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\Login.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\Chat.js",["181","182","183"],"import React, { useEffect, useState } from \"react\";\r\nimport { Avatar, IconButton } from \"@material-ui/core\";\r\nimport { SearchOutlined } from '@material-ui/icons';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport MoodIcon from '@material-ui/icons/Mood';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport { useSelector } from \"react-redux\";\r\nimport \"./Chat.css\";\r\nimport { selectChatId, selectChatName } from \"./features/chatSlice\";\r\nimport db from \"./firebase\";\r\nimport Message from \"./Message\";\r\nimport firebase from \"firebase\";\r\nimport { selectUser } from \"./features/userSlice\";\r\nimport FlipMove from \"react-flip-move\";\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\nimport axios from \"./axios\";\r\nimport Pusher from \"pusher-js\";\r\n\r\nconst pusher = new Pusher('1b21e77f948fe6130ef0', {\r\n  cluster: 'us2'\r\n});\r\n\r\nfunction Chat() {\r\n  const user = useSelector(selectUser);\r\n  const [input, setInput] = useState(\"\");\r\n  const chatName = useSelector(selectChatName);\r\n  const chatId = useSelector(selectChatId);\r\n  const [messages, setMessages] = useState([]);\r\n  const [lastPhoto, setLastPhoto] = useState(\"\");\r\n  const [lastTimestamp, setLastTimestamp] = useState(\"\");\r\n  const [emoji, setEmoji] = useState(false);\r\n\r\n  const getConversation = (chatId) => {\r\n      if(chatId) {\r\n          axios.get(`/get/conversation?id=${chatId}`).then((res) => {\r\n              setMessages(res.data[0].conversation)\r\n          })\r\n      }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // when the chat component loads or chatId changes (changing the chat)\r\n    // we want to unsubscribe to the pusher we are already subscribed to\r\n    // that way only the chat we are in is refreshed and not every single\r\n    // subscribed chat\r\n    pusher.unsubscribe(\"messages\");\r\n\r\n    getConversation(chatId);\r\n\r\n      // pusher subscribes to the channel \"messages\" \r\n      // and listens to the event called \"newMessages\"\r\n      const channel = pusher.subscribe('messages');\r\n      channel.bind('newMessage', function(data) {\r\n        getConversation(chatId);\r\n      });\r\n  }, [chatId]);\r\n\r\n  // used to display the most recent message and user in the sidebar chat\r\n  const getSideBarChatElement = () => {\r\n      axios.get(`/get/lastMessage?id=${chatId}`).then((res) => {\r\n          // setLastMsg(res.data.message)\r\n          setLastPhoto(res.data.user.photo)\r\n          setLastTimestamp(res.data.timestamp)\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n      getSideBarChatElement();\r\n\r\n      // realtime functionality\r\n      // pusher subscribes to the channel \"messages\" \r\n      // and listens to the event called \"newMessages\"\r\n      const channel = pusher.subscribe('messages');\r\n      channel.bind('newMessage', function(data) {\r\n        getSideBarChatElement();\r\n      });\r\n  }, [chatId]);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"You typed >>>\", input);\r\n\r\n    // add the message entered into the database\r\n    // assign the server timestamp, to display the time based on the user's time zone\r\n    axios.post(`/new/message?id=${chatId}`, {\r\n        message: input,\r\n        timestamp: Date.now(),\r\n        user: user\r\n    })\r\n\r\n    setInput(\"\");\r\n  };\r\n\r\n  const addEmoji = (e) => {\r\n      let chosenEmoji = e.native;\r\n      setInput(input + chosenEmoji);\r\n  };\r\n\r\n  const closeEmojiPicker = () => {\r\n      if(emoji) {\r\n          setEmoji(false);\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat\">\r\n      <div className=\"chat__header\">\r\n        <Avatar src={lastPhoto} />\r\n\r\n        <div className=\"chat__headerInfo\">\r\n            <h3>\r\n                { chatName \r\n                ? chatName\r\n                : \"Please click on a chat or start a new one\"}\r\n            </h3>\r\n            {/* last seen will be the timestamp from the last message */}\r\n            <p>\r\n                Last seen{\" \"}\r\n                { chatName \r\n                  ? new Date(parseInt(lastTimestamp)).toLocaleString()\r\n                  : \"unknown\"}\r\n            </p>\r\n        </div>\r\n\r\n        <div className=\"chat__headerRight\">\r\n            <IconButton>\r\n                <SearchOutlined />\r\n            </IconButton>\r\n            <IconButton>\r\n                <MoreVertIcon />\r\n            </IconButton>\r\n        </div>\r\n      </div>\r\n\r\n      {/* chat messages */}\r\n      <div className=\"chat__messages\">\r\n        <FlipMove>\r\n          {messages.map(({ user, _id, message, timestamp }) => (\r\n            <Message key={_id} id={_id} sender={user} message={message} timestamp={timestamp}/>\r\n          ))}\r\n        </FlipMove>\r\n      </div>\r\n\r\n      <div className=\"chat__input\">\r\n        <IconButton>\r\n            <MoodIcon \r\n            className=\"chat__emojiIcon\" \r\n            onClick={ () => setEmoji(!emoji)}\r\n            />\r\n            {emoji ? <Picker onSelect={addEmoji} /> : null}\r\n        </IconButton>\r\n        <form>\r\n          <input\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onClick={closeEmojiPicker} \r\n            placeholder=\"Type a message\"\r\n            type=\"text\"\r\n          />\r\n          <button onClick={sendMessage}>Send Message</button>\r\n        </form>\r\n\r\n        <IconButton>\r\n          <MicIcon className=\"chat__mic\" />\r\n        </IconButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\Sidebar.js",["184"],"import { Avatar, IconButton } from \"@material-ui/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport \"./Sidebar.css\";\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"./features/userSlice\";\r\nimport db, { auth } from \"./firebase\";\r\nimport axios from \"./axios\";\r\nimport Pusher from \"pusher-js\";\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport GroupAddIcon from '@material-ui/icons/GroupAdd';\r\n\r\nconst pusher = new Pusher('1b21e77f948fe6130ef0', {\r\n  cluster: 'us2'\r\n});\r\n\r\nfunction Sidebar() {\r\n  const user = useSelector(selectUser);\r\n  const [chats, setChats] = useState([]);\r\n\r\n  const getChats = () => {\r\n      axios.get(\"/get/conversationList\")\r\n      .then((res) => {\r\n          setChats(res.data)\r\n      })\r\n  }\r\n\r\n  // Render all the chats from the DB\r\n  useEffect(() => {\r\n      getChats();\r\n\r\n      // pusher subscribes to the channel \"messages\" \r\n      // and listens to the event called \"newMessages\"\r\n      const channel = pusher.subscribe('chats');\r\n      channel.bind('newChat', function(data) {\r\n        getChats();\r\n      });\r\n  }, []);\r\n\r\n    const addChat = (e) => {\r\n        e.preventDefault();\r\n\r\n        const chatName = prompt(\"Please enter a chat name\");\r\n        const firstMsg = prompt(\"Please send a welcome message\");\r\n\r\n        // Using the entered name, add the new chat into the database\r\n        // Enter the first Msg inside that chat/conversation using chatId\r\n        if(chatName) {\r\n            \r\n            let chatId = \"\";\r\n\r\n            axios.post(\"/new/chatroom\", {\r\n                chatName: chatName\r\n            }).then((res) => {\r\n                chatId = res.data._id\r\n            }).then(() => {\r\n                axios.post(`/new/message?id=${chatId}`, {\r\n                    message: firstMsg,\r\n                    timestamp: Date.now(),\r\n                    user: user\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__header\">\r\n        <Avatar\r\n          // onClick={() => auth.signOut()}\r\n          src={user.photo}\r\n          className=\"sidebar__avatar\"\r\n        />\r\n        <div className=\"sidebar__headerRight\">\r\n            <IconButton>\r\n                <DonutLargeIcon />\r\n            </IconButton>\r\n\r\n            <IconButton>\r\n                <ChatIcon />\r\n            </IconButton>\r\n            \r\n            <div onClick={() => auth.signOut()}>\r\n                <IconButton>\r\n                    <ExitToAppIcon />\r\n                </IconButton>            \r\n            </div>                    \r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"sidebar__search\">\r\n          <div className=\"sidebar__searchContainer\">\r\n              <SearchOutlined />\r\n              \r\n              <input \r\n                placeholder=\"Search or start a new chat\"\r\n                type=\"text\"\r\n              />\r\n          </div>       \r\n      </div>\r\n\r\n      <div className=\"sidebar__newchat\">\r\n\r\n      </div>\r\n\r\n      <div onClick={addChat} className=\"sidebar__newChat\">                  \r\n          <GroupAddIcon  style={{fill: \"white\"}}/>\r\n          <div className=\"sidebarChat__newChat_text\">\r\n              <h2>New Chat</h2>\r\n          </div> \r\n      </div>\r\n\r\n      <div className=\"sidebar__chats\">\r\n        {/* {chats.map(({ id, data: { chatName } }) => (\r\n          <SidebarChat key={id} id={id} chatName={chatName} />\r\n        ))} */}\r\n\r\n        {chats.map(({ id, name, timestamp }) => (\r\n          <SidebarChat key={id} id={id} chatName={name} timestamp={timestamp} />\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"sidebar__footer\">\r\n          <p>&copy; Preyansh Kachhia {new Date().getFullYear()}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\features\\userSlice.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\features\\chatSlice.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\axios.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\Message.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-clone-mern\\whatsapp-frontend\\src\\SidebarChat.js",["185","186","187","188","189"],"import { Avatar } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setChat } from \"./features/chatSlice\";\r\nimport db from \"./firebase\";\r\nimport \"./SidebarChat.css\";\r\nimport axios from \"./axios\";\r\nimport Pusher from \"pusher-js\";\r\n\r\nconst pusher = new Pusher('1b21e77f948fe6130ef0', {\r\n  cluster: 'us2'\r\n});\r\n\r\nfunction SidebarChat({ id, chatName }) {\r\n  const dispatch = useDispatch();\r\n  const [chatInfo, setChatInfo] = useState([]);\r\n  const [lastMsg, setLastMsg] = useState(\"\");\r\n  const [lastPhoto, setLastPhoto] = useState(\"\");\r\n  const [lastTimestamp, setLastTimestamp] = useState(\"\");\r\n\r\n    // used to display the most recent message and user in the sidebar chat\r\n  const getSideBarChatElement = () => {\r\n      axios.get(`/get/lastMessage?id=${id}`).then((res) => {\r\n          setLastMsg(res.data.message)\r\n          setLastPhoto(res.data.user.photo)\r\n          setLastTimestamp(res.data.timestamp)\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n      getSideBarChatElement();\r\n\r\n      // realtime functionality\r\n      // pusher subscribes to the channel \"messages\" \r\n      // and listens to the event called \"newMessages\"\r\n      const channel = pusher.subscribe('messages');\r\n      channel.bind('newMessage', function(data) {\r\n        getSideBarChatElement();\r\n      });\r\n  }, [id]);\r\n\r\n  return (\r\n    <div\r\n      onClick={() =>\r\n        dispatch(\r\n          setChat({\r\n            chatId: id,\r\n            chatName: chatName,\r\n          })\r\n        )\r\n      }\r\n      className=\"sidebarChat\"\r\n    >\r\n      <Avatar src={lastPhoto} />\r\n      <div className=\"sidebarChat__info\">\r\n        <h2>{chatName}</h2>\r\n        <p>{lastMsg}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SidebarChat;\r\n","D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\index.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\App.js",["190"],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\serviceWorker.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\app\\store.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\Login.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\Chat.js",["191","192","193"],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\firebase.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\Sidebar.js",["194"],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\features\\chatSlice.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\features\\userSlice.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\Message.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\axios.js",[],"D:\\Documents - HDD\\React Projects\\whatsapp-frontend\\src\\SidebarChat.js",["195","196","197","198","199"],{"ruleId":"200","replacedBy":"201"},{"ruleId":"202","replacedBy":"203"},{"ruleId":"204","severity":1,"message":"205","line":31,"column":6,"nodeType":"206","endLine":31,"endColumn":8,"suggestions":"207"},{"ruleId":"208","severity":1,"message":"209","line":7,"column":8,"nodeType":"210","messageId":"211","endLine":7,"endColumn":10},{"ruleId":"208","severity":1,"message":"209","line":10,"column":8,"nodeType":"210","messageId":"211","endLine":10,"endColumn":10},{"ruleId":"208","severity":1,"message":"212","line":12,"column":8,"nodeType":"210","messageId":"211","endLine":12,"endColumn":16},{"ruleId":"204","severity":1,"message":"213","line":78,"column":6,"nodeType":"206","endLine":78,"endColumn":14,"suggestions":"214"},{"ruleId":"208","severity":1,"message":"209","line":6,"column":8,"nodeType":"210","messageId":"211","endLine":6,"endColumn":10},{"ruleId":"208","severity":1,"message":"215","line":17,"column":10,"nodeType":"210","messageId":"211","endLine":17,"endColumn":18},{"ruleId":"208","severity":1,"message":"216","line":17,"column":20,"nodeType":"210","messageId":"211","endLine":17,"endColumn":31},{"ruleId":"208","severity":1,"message":"217","line":20,"column":12,"nodeType":"210","messageId":"211","endLine":20,"endColumn":25},{"ruleId":"204","severity":1,"message":"213","line":41,"column":8,"nodeType":"206","endLine":41,"endColumn":12,"suggestions":"218"},{"ruleId":"200","replacedBy":"219"},{"ruleId":"202","replacedBy":"220"},{"ruleId":"204","severity":1,"message":"205","line":31,"column":6,"nodeType":"206","endLine":31,"endColumn":8,"suggestions":"221"},{"ruleId":"208","severity":1,"message":"209","line":10,"column":8,"nodeType":"210","messageId":"211","endLine":10,"endColumn":10},{"ruleId":"208","severity":1,"message":"212","line":12,"column":8,"nodeType":"210","messageId":"211","endLine":12,"endColumn":16},{"ruleId":"204","severity":1,"message":"213","line":78,"column":6,"nodeType":"206","endLine":78,"endColumn":14,"suggestions":"222"},{"ruleId":"208","severity":1,"message":"209","line":7,"column":8,"nodeType":"210","messageId":"211","endLine":7,"endColumn":10},{"ruleId":"208","severity":1,"message":"209","line":6,"column":8,"nodeType":"210","messageId":"211","endLine":6,"endColumn":10},{"ruleId":"208","severity":1,"message":"215","line":17,"column":10,"nodeType":"210","messageId":"211","endLine":17,"endColumn":18},{"ruleId":"208","severity":1,"message":"216","line":17,"column":20,"nodeType":"210","messageId":"211","endLine":17,"endColumn":31},{"ruleId":"208","severity":1,"message":"217","line":20,"column":10,"nodeType":"210","messageId":"211","endLine":20,"endColumn":23},{"ruleId":"204","severity":1,"message":"213","line":41,"column":6,"nodeType":"206","endLine":41,"endColumn":10,"suggestions":"223"},{"ruleId":"204","severity":1,"message":"205","line":31,"column":6,"nodeType":"206","endLine":31,"endColumn":8,"suggestions":"224"},{"ruleId":"208","severity":1,"message":"209","line":10,"column":8,"nodeType":"210","messageId":"211","endLine":10,"endColumn":10},{"ruleId":"208","severity":1,"message":"212","line":12,"column":8,"nodeType":"210","messageId":"211","endLine":12,"endColumn":16},{"ruleId":"204","severity":1,"message":"213","line":78,"column":6,"nodeType":"206","endLine":78,"endColumn":14,"suggestions":"225"},{"ruleId":"208","severity":1,"message":"209","line":7,"column":8,"nodeType":"210","messageId":"211","endLine":7,"endColumn":10},{"ruleId":"208","severity":1,"message":"209","line":6,"column":8,"nodeType":"210","messageId":"211","endLine":6,"endColumn":10},{"ruleId":"208","severity":1,"message":"215","line":17,"column":10,"nodeType":"210","messageId":"211","endLine":17,"endColumn":18},{"ruleId":"208","severity":1,"message":"216","line":17,"column":20,"nodeType":"210","messageId":"211","endLine":17,"endColumn":31},{"ruleId":"208","severity":1,"message":"217","line":20,"column":10,"nodeType":"210","messageId":"211","endLine":20,"endColumn":23},{"ruleId":"204","severity":1,"message":"213","line":41,"column":6,"nodeType":"206","endLine":41,"endColumn":10,"suggestions":"226"},"no-native-reassign",["227"],"no-negated-in-lhs",["228"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["229"],"no-unused-vars","'db' is defined but never used.","Identifier","unusedVar","'firebase' is defined but never used.","React Hook useEffect has a missing dependency: 'getSideBarChatElement'. Either include it or remove the dependency array.",["230"],"'chatInfo' is assigned a value but never used.","'setChatInfo' is assigned a value but never used.","'lastTimestamp' is assigned a value but never used.",["231"],["227"],["228"],["232"],["233"],["234"],["235"],["236"],["237"],"no-global-assign","no-unsafe-negation",{"desc":"238","fix":"239"},{"desc":"240","fix":"241"},{"desc":"242","fix":"243"},{"desc":"238","fix":"244"},{"desc":"240","fix":"245"},{"desc":"242","fix":"246"},{"desc":"238","fix":"247"},{"desc":"240","fix":"248"},{"desc":"242","fix":"249"},"Update the dependencies array to be: [dispatch]",{"range":"250","text":"251"},"Update the dependencies array to be: [chatId, getSideBarChatElement]",{"range":"252","text":"253"},"Update the dependencies array to be: [getSideBarChatElement, id]",{"range":"254","text":"255"},{"range":"256","text":"251"},{"range":"257","text":"253"},{"range":"258","text":"255"},{"range":"259","text":"251"},{"range":"260","text":"253"},{"range":"261","text":"255"},[851,853],"[dispatch]",[2794,2802],"[chatId, getSideBarChatElement]",[1441,1445],"[getSideBarChatElement, id]",[851,853],[2792,2800],[1387,1391],[851,853],[2792,2800],[1387,1391]]